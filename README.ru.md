# Grafana Git Sync

**Git ‚Üí Sync ‚Üí Grafana API**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ Grafana –∏–∑ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ.

[![Go Version](https://img.shields.io/badge/Go-1.24-blue.svg)](https://golang.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)

[English](README.md) | **–†—É—Å—Å–∫–∏–π**

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üìÅ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–∞–ø–æ–∫** - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏–∑ Git
- **üîÑ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **üìù –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤** - –°–≤—è–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–∏ Grafana —Å Git-–∫–æ–º–º–∏—Ç–∞–º–∏ (–∞–≤—Ç–æ—Ä, —Å–æ–æ–±—â–µ–Ω–∏–µ)
- **üöÄ –£–º–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã
- **üè• Health Check** - HTTP endpoint –¥–ª—è Docker/Kubernetes –ø—Ä–æ–±
- **üîê –ì–∏–±–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - SSH –∏–ª–∏ HTTPS –¥–ª—è Git, —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Grafana
- **üê≥ Stateless** - –ë–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–µ–Ω –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker Run

```bash
docker run -d \
  --name grafana-git-sync \
  -p 8080:8080 \
  -e GIT_REPO_URL=ssh://git@github.com/your-org/dashboards.git \
  -e GIT_BRANCH=main \
  -e GIT_SSH_KEY="$(cat ~/.ssh/id_rsa)" \
  -e GRAFANA_URL=http://localhost:3000 \
  -e GF_SECURITY_ADMIN_USER=admin \
  -e GF_SECURITY_ADMIN_PASSWORD=admin \
  grafana-git-sync:latest
```

### Docker Compose

```yaml
version: '3.8'

services:
  grafana-git-sync:
    image: grafana-git-sync:latest
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      GIT_REPO_URL: ssh://git@github.com/your-org/dashboards.git
      GIT_BRANCH: main
      GIT_SSH_KEY: |
        -----BEGIN OPENSSH PRIVATE KEY-----
        –≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
        -----END OPENSSH PRIVATE KEY-----
      GRAFANA_URL: http://grafana:3000
      GF_SECURITY_ADMIN_USER: admin
      GF_SECURITY_ADMIN_PASSWORD: admin
      POLL_INTERVAL_SEC: 60
```

**–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤:** [examples/](examples/)

---

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------------|
| `GIT_REPO_URL` | URL Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (SSH –∏–ª–∏ HTTPS) |
| `GIT_BRANCH` | –í–µ—Ç–∫–∞ –∏–ª–∏ —Ç–µ–≥ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| `GRAFANA_URL` | URL —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Grafana |

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Git)

**SSH:**
```bash
GIT_SSH_KEY="$(cat ~/.ssh/id_rsa)"
```

**HTTPS:**
```bash
GIT_HTTPS_USER=username
GIT_HTTPS_PASS=token_–∏–ª–∏_–ø–∞—Ä–æ–ª—å
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Grafana)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
```bash
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–∫–µ–Ω–∞:**
```bash
GF_SECURITY_TOKEN=glsa_–≤–∞—à_—Ç–æ–∫–µ–Ω
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|---------|-------------|
| `POLL_INTERVAL_SEC` | `60` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ Git |
| `GIT_REPO_SUBDIR` | `.` | –ü–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –¥–∞—à–±–æ—Ä–¥–∞–º–∏ |
| `HEALTH_CHECK_PORT` | `8080` | –ü–æ—Ä—Ç health endpoint |

**–ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** [docs/configuration.md](docs/configuration.md)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](docs/configuration.md)** - –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/architecture.md)** - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –≤–Ω—É—Ç—Ä–∏
- **[–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Docker](docs/deployment/docker.md)** - Docker –∏ Docker Compose
- **[–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Kubernetes](docs/deployment/kubernetes.md)** - K8s –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏ Helm
- **[–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](docs/troubleshooting.md)** - –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Git** - –ó–∞–≥—Ä—É–∂–∞–µ—Ç JSON —Ñ–∞–π–ª—ã –¥–∞—à–±–æ—Ä–¥–æ–≤
2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫** - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Git –≤ –ø–∞–ø–∫–∏ Grafana
3. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å Grafana —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏–π
4. **–û–ø—Ä–æ—Å –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Git –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥
5. **–£–º–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

**–î–µ—Ç–∞–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** [docs/architecture.md](docs/architecture.md)

---

## üéØ –ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ?

**–ù–∏ –æ–¥–Ω–æ –¥—Ä—É–≥–æ–µ OSS —Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç:**
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API (–±–µ–∑ provisioning –∏ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ Grafana)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ Git –∫–æ–º–º–∏—Ç—ã
- ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–∞–ø–æ–∫
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ Git
- ‚úÖ Kubernetes-native (stateless, health checks)
- ‚úÖ –ù—É–ª–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ç–æ–ª—å–∫–æ env vars)

**–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è:**
- GitOps workflow
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞–º–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å Git-—Ä–µ–≤—å—é
- Disaster recovery (Git –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã)

---

## üõ† –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
git clone https://github.com/efremov-it/grafana-git-sync.git
cd grafana-git-sync

# –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
make build

# –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
make docker-build

# –ó–∞–ø—É—Å–∫
./bin/grafana-git-sync
```

---

## üó∫ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

- [x] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ (v0.1.0)
- [x] Health check endpoint (v0.1.0)
- [x] –£–º–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (v0.1.0)
- [x] –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–∞–ø–æ–∫ (v0.1.0)
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- [ ] –†–µ–∂–∏–º Webhook
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
- [ ] Helm chart

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE)

---

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–í–∫–ª–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è! –°–º. [CONTRIBUTING.md](CONTRIBUTING.md)

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add feature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üêõ [GitHub Issues](https://github.com/efremov-it/grafana-git-sync/issues)
- üí¨ [GitHub Discussions](https://github.com/efremov-it/grafana-git-sync/discussions)
- üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/)

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Grafana**
